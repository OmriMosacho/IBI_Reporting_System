<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>components/tables/CustomersTable.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-CompaniesTable.html">CompaniesTable</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-CompaniesTable.html#~Fetchtabledata">Fetch table data</a></li></ul></li><li><a href="module-CustomersTable.html">CustomersTable</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-CustomersTable.html#~Fetchtabledata">Fetch table data</a></li></ul></li><li><a href="module-Dashboard.html">Dashboard</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-Dashboard.html#~handleLogout">handleLogout</a></li></ul></li><li><a href="module-DataTable.html">DataTable</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-DataTable.html#~DataTable">DataTable</a></li><li data-type='method' style='display: none;'><a href="module-DataTable.html#~formatCellValue">formatCellValue</a></li></ul></li><li><a href="module-StocksTable.html">StocksTable</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-StocksTable.html#~Fetchtabledata">Fetch table data</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#API_BASE_URL">API_BASE_URL</a></li><li><a href="global.html#apiClient">apiClient</a></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">components/tables/CustomersTable.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @file CustomersTable component for portfolio screen.
 * @module CustomersTable
 */

import { useState, useEffect } from 'react';
import { api } from '../../ApiRequest';
import './Table.css';

/**
 * CustomersTable React component â€” renders the customers table.
 * @function
 * @param {Object} props
 * @param {string} props.token - Authentication token for API requests
 * @returns {JSX.Element}
 */
export default function CustomersTable({ token }) {

  /**
   * @member customers
   * @description State variables for customers data, loading status, error messages, and table collapse state
   */
  const [customers, setCustomers] = useState([]);
  /**
   * @member loading
   * @description Loading state to indicate data fetch in progress
   */
  const [loading, setLoading] = useState(true);
  /**
   * @member error
   * @description Error state to capture any issues during data fetch
   */
  const [error, setError] = useState(null);
  /**
   * @member collapsed
   * @description Collapse state to toggle table visibility
   */
  const [collapsed, setCollapsed] = useState(false);

  /**
   * @function Fetch table data
   * 
   * @description Fetch customers prices data from the API when the component mounts or when the token changes
   * Uses the reusable api.get method to request data from the 'fetch_table' endpoint
   * Handles loading, error states, and updates the customers state with the fetched data
   * @param {string} token - Authentication token for API requests
   */
  useEffect(() => {
    api.get('fetch_table', { tableName: 'customers' })
      .then((data) => setCustomers(data))
      .catch((err) => {
        console.error(err);
        setError('Failed to load customers');
      })
      .finally(() => setLoading(false));
  }, [token]);

  if (loading) return &lt;p>Loading customers...&lt;/p>;
  if (error) return &lt;p className="error">{error}&lt;/p>;

  /**
   * @member total
   * @description Calculate total number of rows in the customers data
   */
  const total = customers.rows?.length || 0;

  return (
    &lt;div className="table-section">
      &lt;div className="table-header">
        &lt;h2>Customers Overview ({total} Rows)&lt;/h2>
        &lt;button className="collapse-btn" onClick={() => setCollapsed(!collapsed)}>
          {collapsed ? 'Show Table' : 'Hide Table'}
        &lt;/button>
      &lt;/div>

      {!collapsed &amp;&amp; (
        &lt;table className="styled-table">
          &lt;thead>
            &lt;tr>
              &lt;th>ID&lt;/th>
              &lt;th>Name&lt;/th>
              &lt;th>Join Date&lt;/th>
              &lt;th>Tenure (Years)&lt;/th>
              &lt;th>Segment&lt;/th>
            &lt;/tr>
          &lt;/thead>
          &lt;tbody>
            {customers.rows?.map((c) => (
              &lt;tr key={c.customerid}>
                &lt;td>{c.customerid}&lt;/td>
                &lt;td>{c.customername}&lt;/td>
                &lt;td>{new Date(c.joindate).toISOString().split('T')[0]}&lt;/td>
                &lt;td>{c.tenureyears}&lt;/td>
                &lt;td>
                  &lt;span className={`badge ${c.segment?.toLowerCase()}`}>{c.segment}&lt;/span>
                &lt;/td>
              &lt;/tr>
            ))}
          &lt;/tbody>
        &lt;/table>
      )}
    &lt;/div>
  );
}
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.5</a> on Fri Nov 07 2025 13:00:00 GMT+0200 (Israel Standard Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>


<script src="scripts/collapse.js" defer></script>


</body>
</html>
